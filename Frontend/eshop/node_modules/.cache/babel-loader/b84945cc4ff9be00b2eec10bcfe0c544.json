{"ast":null,"code":"import { PAYMENT_USER_FAIL, PAYMENT_USER_REQUEST, PAYMENT_USER_SUCCESS } from \"../constants/paymentConstants\";\nimport axios from \"axios\";\nexport const CreatePayment = (cartItems, totalPrice) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: PAYMENT_USER_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    console.log('éé');\n    const config = {\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    console.log(config);\n    const {\n      data\n    } = await axios.post(`http://127.0.0.1:8000/api/stripe/create-checkout-session/`, cartItems, totalPrice, config);\n    dispatch({\n      type: PAYMENT_USER_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: PAYMENT_USER_FAIL,\n      payload: error.response\n    });\n  }\n};","map":{"version":3,"names":["PAYMENT_USER_FAIL","PAYMENT_USER_REQUEST","PAYMENT_USER_SUCCESS","axios","CreatePayment","cartItems","totalPrice","dispatch","getState","type","userLogin","userInfo","console","log","config","headers","Authorization","token","data","post","payload","error","response"],"sources":["C:/Users/Alexandre Brosseau/Desktop/drf_react_eshop/eshop/src/redux/actions/paymentAction.js"],"sourcesContent":["import { PAYMENT_USER_FAIL, PAYMENT_USER_REQUEST, PAYMENT_USER_SUCCESS } from \"../constants/paymentConstants\"\r\nimport axios from \"axios\"\r\n\r\nexport const CreatePayment =  (cartItems, totalPrice) => async(dispatch, getState) => {\r\n    \r\n    try{\r\n        dispatch({ type: PAYMENT_USER_REQUEST})\r\n        const {userLogin: {userInfo},} = getState()\r\n        console.log('éé')\r\n       \r\n        const config = {\r\n            headers: {\r\n                'Content-type':  'application/json',\r\n                Authorization: `Bearer ${userInfo.token}`\r\n            }\r\n\r\n        }\r\n        console.log(config)\r\n\r\n        const {data} = await axios.post(`http://127.0.0.1:8000/api/stripe/create-checkout-session/`,cartItems, totalPrice,  config )\r\n\r\n\r\n        dispatch({\r\n            type: PAYMENT_USER_SUCCESS,\r\n            payload: data\r\n        })\r\n\r\n      \r\n\r\n       \r\n\r\n\r\n\r\n    }catch(error){\r\n        dispatch({\r\n            type : PAYMENT_USER_FAIL,\r\n            payload : error.response\r\n          \r\n        })\r\n    }\r\n\r\n\r\n}   "],"mappings":"AAAA,SAASA,iBAAT,EAA4BC,oBAA5B,EAAkDC,oBAAlD,QAA8E,+BAA9E;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,aAAa,GAAI,CAACC,SAAD,EAAYC,UAAZ,KAA2B,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;EAElF,IAAG;IACCD,QAAQ,CAAC;MAAEE,IAAI,EAAER;IAAR,CAAD,CAAR;IACA,MAAM;MAACS,SAAS,EAAE;QAACC;MAAD;IAAZ,IAA2BH,QAAQ,EAAzC;IACAI,OAAO,CAACC,GAAR,CAAY,IAAZ;IAEA,MAAMC,MAAM,GAAG;MACXC,OAAO,EAAE;QACL,gBAAiB,kBADZ;QAELC,aAAa,EAAG,UAASL,QAAQ,CAACM,KAAM;MAFnC;IADE,CAAf;IAOAL,OAAO,CAACC,GAAR,CAAYC,MAAZ;IAEA,MAAM;MAACI;IAAD,IAAS,MAAMf,KAAK,CAACgB,IAAN,CAAY,2DAAZ,EAAuEd,SAAvE,EAAkFC,UAAlF,EAA+FQ,MAA/F,CAArB;IAGAP,QAAQ,CAAC;MACLE,IAAI,EAAEP,oBADD;MAELkB,OAAO,EAAEF;IAFJ,CAAD,CAAR;EAWH,CA5BD,CA4BC,OAAMG,KAAN,EAAY;IACTd,QAAQ,CAAC;MACLE,IAAI,EAAGT,iBADF;MAELoB,OAAO,EAAGC,KAAK,CAACC;IAFX,CAAD,CAAR;EAKH;AAGJ,CAvCM"},"metadata":{},"sourceType":"module"}