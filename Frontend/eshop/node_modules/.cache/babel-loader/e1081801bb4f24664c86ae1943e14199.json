{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alexandre Brosseau\\\\Desktop\\\\drf_react_eshop\\\\eshop\\\\src\\\\components\\\\Payment\\\\payment.js\",\n    _s = $RefreshSig$();\n\nimport { maxWidth } from \"@mui/system\";\nimport axios from \"axios\";\nimport { CreatePayment } from \"../../redux/actions/paymentAction\";\nimport React, { useState, useEffect } from \"react\";\nimport { API_URL } from \"../Stripe/StripeContainer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Row, Col, ListGroup, Image, Button, FormControl, Form } from \"react-bootstrap\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Payment = () => {\n  _s();\n\n  var _orderUser$;\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const [message, setMessage] = useState(\"\");\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  const orderCreate = useSelector(state => state.orderCreate);\n  const {\n    orderUser\n  } = orderCreate;\n  const totalPrice = orderUser === null || orderUser === void 0 ? void 0 : (_orderUser$ = orderUser[0]) === null || _orderUser$ === void 0 ? void 0 : _orderUser$.totalPrice;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // Check to see if this is a redirect back from Checkout\n    const query = new URLSearchParams(window.location.search);\n\n    if (query.get(\"success\")) {\n      setMessage(\"Order placed! You will receive an email confirmation.\");\n    }\n\n    if (query.get(\"canceled\")) {\n      setMessage(\"Order canceled -- continue to shop around and checkout when you're ready.\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Col, {\n    md: 8,\n    children: /*#__PURE__*/_jsxDEV(ListGroup, {\n      variant: \"flush\",\n      children: cartItems.map(item => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 2,\n            children: /*#__PURE__*/_jsxDEV(Image, {\n              id: \"imageProduct\",\n              src: item.image,\n              height: 175,\n              width: 210\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 2,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              id: \"productTitle\",\n              to: `/product/${item.product}`,\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 2,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"productPrice\",\n              children: [item.price.toFixed(2), \"\\u20AC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 1,\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"http://127.0.0.1:8000/api/stripe/create-checkout-session\",\n              method: \"POST\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: \"Checkout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 37\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Payment, \"BlQTaL8hK4mh1Wms9IbblTP4ujc=\", false, function () {\n  return [useStripe, useElements, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["maxWidth","axios","CreatePayment","React","useState","useEffect","API_URL","useDispatch","useSelector","Row","Col","ListGroup","Image","Button","FormControl","Form","CardElement","useStripe","useElements","Link","Payment","stripe","elements","message","setMessage","cart","state","cartItems","orderCreate","orderUser","totalPrice","userLogin","userInfo","dispatch","query","URLSearchParams","window","location","search","get","map","item","image","product","title","price","toFixed","id"],"sources":["C:/Users/Alexandre Brosseau/Desktop/drf_react_eshop/eshop/src/components/Payment/payment.js"],"sourcesContent":["import { maxWidth } from \"@mui/system\";\r\n\r\nimport axios from \"axios\"\r\nimport { CreatePayment } from \"../../redux/actions/paymentAction\";\r\nimport React, { useState, useEffect,  } from \"react\";\r\nimport { API_URL } from \"../Stripe/StripeContainer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Row ,Col, ListGroup, Image, Button, FormControl, Form} from \"react-bootstrap\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Payment = () => {\r\n\r\n    const stripe = useStripe()\r\n    const elements = useElements()\r\n    const [message, setMessage] = useState(\"\");\r\n    const cart = useSelector(state => state.cart)\r\n    const {cartItems} = cart\r\n  \r\n   \r\n    const orderCreate = useSelector(state => state.orderCreate)\r\n    const {orderUser} = orderCreate\r\n    const totalPrice = orderUser?.[0]?.totalPrice\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} =  userLogin\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        // Check to see if this is a redirect back from Checkout\r\n        const query = new URLSearchParams(window.location.search);\r\n    \r\n        if (query.get(\"success\")) {\r\n          setMessage(\"Order placed! You will receive an email confirmation.\");\r\n        }\r\n    \r\n        if (query.get(\"canceled\")) {\r\n          setMessage(\r\n            \"Order canceled -- continue to shop around and checkout when you're ready.\"\r\n          );\r\n        }\r\n      }, []);\r\n\r\n \r\n return (\r\n       \r\n    <Col md={8}>  \r\n             \r\n\r\n                    <ListGroup variant=\"flush\">\r\n                        {cartItems.map(item => \r\n                            <ListGroup.Item key={item.id}>\r\n                                    <Row>\r\n                                        <Col md={2}>\r\n                                            <Image id='imageProduct' src={item.image} height={175} width={210}/>\r\n                                        </Col>\r\n                                    \r\n                                        <Col md={2}>\r\n                                            <Link id=\"productTitle\" to={`/product/${item.product}`}>{item.title}</Link>\r\n                                         \r\n                                        </Col>\r\n                                        <Col md={2}>\r\n                                             <p id=\"productPrice\">{item.price.toFixed(2)}â‚¬</p>\r\n                                        </Col>\r\n                                        <Col md={2}>\r\n                                           \r\n                                            \r\n                                        </Col>\r\n                                        <Col md={1}>\r\n                                        <form action=\"http://127.0.0.1:8000/api/stripe/create-checkout-session\" method=\"POST\">\r\n                                            <button type=\"submit\">\r\n                                                             Checkout\r\n                                                                </button>\r\n                                        </form>\r\n                                        </Col>\r\n\r\n                                       \r\n                                    </Row>\r\n                                     \r\n                            </ListGroup.Item>\r\n                          \r\n                                )}\r\n                      \r\n                    </ListGroup>\r\n               \r\n            </Col>\r\n  \r\n \r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n   )}\r\n\r\n   \r\n\r\nexport default Payment"],"mappings":"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"},"metadata":{},"sourceType":"module"}