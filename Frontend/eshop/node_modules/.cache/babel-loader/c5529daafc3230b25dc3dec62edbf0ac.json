{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alexandre Brosseau\\\\Desktop\\\\drf_react_eshop\\\\eshop\\\\src\\\\components\\\\Stripe\\\\StripeContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport Payment from \"../Payment/payment\";\nimport { useSelector } from \"react-redux\";\nimport { convertLength } from \"@mui/material/styles/cssUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PUBLIC_KEY = 'pk_test_51Jyg7eGk75zbcxVeN4uGKWm205YsZo0R4Qn5c2rYok07G2G0PCj9wqtqGe08tcABT4v2qMHoI3OcjqruzNln7qdj00RimaDJHq';\nconst SECRET_KEY = 'sk_test_51Jyg7eGk75zbcxVe1clNVNbhNAATOVvuC0xuz6RST5pKtIPVSETBBeJHO9ReQM0t8gqfco9xJJ6LlaREWKHPGCnk00Zofrs8Un';\nconst stripeTestPromise = loadStripe(PUBLIC_KEY);\n\nconst Stripe = () => {\n  _s();\n\n  const [clientSecret, setClientSecret] = useState(\"\");\n  console.log(clientSecret);\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const token = userInfo.token;\n  console.log(token);\n  useEffect(() => {\n    // Create PaymentIntent as soon as the page loads\n    fetch(\"http://127.0.0.1:8000/api/stripe/create-payment-intent/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        items: [{\n          id: \"xl-tshirt\"\n        }]\n      })\n    }).then(res => res.json()).then(data => setClientSecret(data.clientSecret));\n  }, []);\n  console.log(data);\n  const appearance = {\n    theme: 'stripe'\n  };\n  const options = {\n    clientSecret,\n    appearance\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: clientSecret && /*#__PURE__*/_jsxDEV(Elements, {\n      options: options,\n      stripe: stripeTestPromise,\n      children: /*#__PURE__*/_jsxDEV(Payment, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Stripe, \"K0bsQGgP1YbP4ECvWByDpm4sMvQ=\", false, function () {\n  return [useSelector];\n});\n\n_c = Stripe;\nexport default Stripe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stripe\");","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","Payment","useSelector","convertLength","PUBLIC_KEY","SECRET_KEY","stripeTestPromise","Stripe","clientSecret","setClientSecret","console","log","userLogin","state","userInfo","token","fetch","method","headers","Authorization","body","JSON","stringify","items","id","then","res","json","data","appearance","theme","options"],"sources":["C:/Users/Alexandre Brosseau/Desktop/drf_react_eshop/eshop/src/components/Stripe/StripeContainer.js"],"sourcesContent":["import React,{useState, useEffect} from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport Payment from \"../Payment/payment\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { convertLength } from \"@mui/material/styles/cssUtils\";\r\n\r\nconst PUBLIC_KEY = 'pk_test_51Jyg7eGk75zbcxVeN4uGKWm205YsZo0R4Qn5c2rYok07G2G0PCj9wqtqGe08tcABT4v2qMHoI3OcjqruzNln7qdj00RimaDJHq'\r\nconst SECRET_KEY = 'sk_test_51Jyg7eGk75zbcxVe1clNVNbhNAATOVvuC0xuz6RST5pKtIPVSETBBeJHO9ReQM0t8gqfco9xJJ6LlaREWKHPGCnk00Zofrs8Un'\r\nconst stripeTestPromise = loadStripe(PUBLIC_KEY)\r\n\r\n\r\n \r\n\r\n\r\nconst Stripe = () => {\r\n    const [clientSecret, setClientSecret] = useState(\"\");\r\n    console.log(clientSecret)\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} = userLogin\r\n    const token = userInfo.token\r\n    console.log(token)\r\n    useEffect(() => {\r\n        // Create PaymentIntent as soon as the page loads\r\n        fetch(\"http://127.0.0.1:8000/api/stripe/create-payment-intent/\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${token}` },\r\n          body: JSON.stringify({ items: [{ id: \"xl-tshirt\" }] }),\r\n        })\r\n          .then((res) => res.json())\r\n          .then((data) => setClientSecret(data.clientSecret));\r\n         \r\n      }, []);\r\n     console.log(data)\r\n\r\n    const appearance = {\r\n        theme: 'stripe',\r\n      };\r\n\r\nconst options = {\r\n    clientSecret,\r\n    appearance,\r\n    };\r\n    return (\r\n        <div className=\"\">\r\n          {clientSecret && (\r\n            <Elements options={options} stripe={stripeTestPromise}>\r\n              <Payment />\r\n            </Elements>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\nexport default Stripe"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAwBC,SAAxB,QAAwC,OAAxC;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,aAAT,QAA8B,+BAA9B;;AAEA,MAAMC,UAAU,GAAG,6GAAnB;AACA,MAAMC,UAAU,GAAG,6GAAnB;AACA,MAAMC,iBAAiB,GAAGP,UAAU,CAACK,UAAD,CAApC;;AAMA,MAAMG,MAAM,GAAG,MAAM;EAAA;;EACjB,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,EAAD,CAAhD;EACAa,OAAO,CAACC,GAAR,CAAYH,YAAZ;EACA,MAAMI,SAAS,GAAGV,WAAW,CAACW,KAAK,IAAIA,KAAK,CAACD,SAAhB,CAA7B;EACA,MAAM;IAACE;EAAD,IAAaF,SAAnB;EACA,MAAMG,KAAK,GAAGD,QAAQ,CAACC,KAAvB;EACAL,OAAO,CAACC,GAAR,CAAYI,KAAZ;EACAjB,SAAS,CAAC,MAAM;IACZ;IACAkB,KAAK,CAAC,yDAAD,EAA4D;MAC/DC,MAAM,EAAE,MADuD;MAE/DC,OAAO,EAAE;QAAE,gBAAgB,kBAAlB;QACCC,aAAa,EAAG,UAASJ,KAAM;MADhC,CAFsD;MAI/DK,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEC,KAAK,EAAE,CAAC;UAAEC,EAAE,EAAE;QAAN,CAAD;MAAT,CAAf;IAJyD,CAA5D,CAAL,CAMGC,IANH,CAMSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EANjB,EAOGF,IAPH,CAOSG,IAAD,IAAUnB,eAAe,CAACmB,IAAI,CAACpB,YAAN,CAPjC;EASD,CAXM,EAWJ,EAXI,CAAT;EAYCE,OAAO,CAACC,GAAR,CAAYiB,IAAZ;EAED,MAAMC,UAAU,GAAG;IACfC,KAAK,EAAE;EADQ,CAAnB;EAIJ,MAAMC,OAAO,GAAG;IACZvB,YADY;IAEZqB;EAFY,CAAhB;EAII,oBACI;IAAK,SAAS,EAAC,EAAf;IAAA,UACGrB,YAAY,iBACX,QAAC,QAAD;MAAU,OAAO,EAAEuB,OAAnB;MAA4B,MAAM,EAAEzB,iBAApC;MAAA,uBACE,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA;EAFJ;IAAA;IAAA;IAAA;EAAA,QADJ;AASC,CAtCL;;GAAMC,M;UAGgBL,W;;;KAHhBK,M;AAuCN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}