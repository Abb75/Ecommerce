{"ast":null,"code":"import { USER_LOGIN_FAIL, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS } from \"../constants/userConstants\";\nimport axiosInstance from \"../../axios\";\nexport const login = (email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: USER_LOGIN_REQUEST\n    });\n    const {\n      data\n    } = await axiosInstance.post(`http://127.0.0.1:8000/api/token/`, {\n      email: email,\n      password: password\n    });\n    console.log(data).then(res => {\n      localStorage.setItem('access_token', res.data.access);\n      localStorage.setItem('refresh_token', res.data.refresh);\n      axiosInstance.defaults.headers['Authorization'] = 'JWT' + localStorage.getItem('access_token');\n      console.log(data.access);\n    });\n    dispatch({\n      type: USER_LOGIN_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_LOGIN_FAIL,\n      error: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};","map":{"version":3,"names":["USER_LOGIN_FAIL","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","axiosInstance","login","email","password","dispatch","type","data","post","console","log","then","res","localStorage","setItem","access","refresh","defaults","headers","getItem","payload","error","response","detail","message"],"sources":["C:/Users/Alexandre Brosseau/Desktop/drf_react_eshop/eshop/src/redux/actions/userActions.js"],"sourcesContent":["import { USER_LOGIN_FAIL, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS } from \"../constants/userConstants\"\r\n\r\nimport axiosInstance from \"../../axios\";\r\n\r\n\r\nexport const login = (email, password) => async(dispatch) => { \r\n    try {\r\n        dispatch({\r\n        type: USER_LOGIN_REQUEST\r\n    })\r\n    const {data} = await  axiosInstance.post(`http://127.0.0.1:8000/api/token/`, {\r\n        email: email,\r\n        password: password\r\n        })\r\n        console.log(data)\r\n    \r\n        .then((res) => {\r\n            localStorage.setItem('access_token', res.data.access);\r\n            localStorage.setItem('refresh_token', res.data.refresh);   \r\n            axiosInstance.defaults.headers['Authorization'] = \r\n                'JWT' + localStorage.getItem('access_token'); \r\n                console.log(data.access)\r\n         }  )\r\n       \r\n       dispatch({\r\n            type: USER_LOGIN_SUCCESS,\r\n            \r\n            payload: data \r\n           \r\n       }\r\n      ) \r\n    \r\n      \r\n\r\n    } catch(error){\r\n     \r\n        dispatch({\r\n            type: USER_LOGIN_FAIL,\r\n            error: error.response && error.response.data.detail\r\n            ? error.response.data.detail : error.message\r\n        })\r\n    }\r\n}\r\n\r\n"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,kBAA1B,EAA8CC,kBAA9C,QAAwE,4BAAxE;AAEA,OAAOC,aAAP,MAA0B,aAA1B;AAGA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB,MAAMC,QAAN,IAAmB;EACzD,IAAI;IACAA,QAAQ,CAAC;MACTC,IAAI,EAAEP;IADG,CAAD,CAAR;IAGJ,MAAM;MAACQ;IAAD,IAAS,MAAON,aAAa,CAACO,IAAd,CAAoB,kCAApB,EAAuD;MACzEL,KAAK,EAAEA,KADkE;MAEzEC,QAAQ,EAAEA;IAF+D,CAAvD,CAAtB;IAIIK,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAECI,IAFD,CAEOC,GAAD,IAAS;MACXC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,GAAG,CAACL,IAAJ,CAASQ,MAA9C;MACAF,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCF,GAAG,CAACL,IAAJ,CAASS,OAA/C;MACAf,aAAa,CAACgB,QAAd,CAAuBC,OAAvB,CAA+B,eAA/B,IACI,QAAQL,YAAY,CAACM,OAAb,CAAqB,cAArB,CADZ;MAEIV,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACQ,MAAjB;IACN,CARF;IAUDV,QAAQ,CAAC;MACJC,IAAI,EAAEN,kBADF;MAGJoB,OAAO,EAAEb;IAHL,CAAD,CAAR;EAUF,CA5BD,CA4BE,OAAMc,KAAN,EAAY;IAEVhB,QAAQ,CAAC;MACLC,IAAI,EAAER,eADD;MAELuB,KAAK,EAAEA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAef,IAAf,CAAoBgB,MAAtC,GACLF,KAAK,CAACC,QAAN,CAAef,IAAf,CAAoBgB,MADf,GACwBF,KAAK,CAACG;IAHhC,CAAD,CAAR;EAKH;AACJ,CArCM"},"metadata":{},"sourceType":"module"}